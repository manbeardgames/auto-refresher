(function(t){"use strict";(function(t,s,e,n){function o(s,e){this.element=s,this._name=i,this._defaults=t.fn[i].defaults,this.settings=t.extend({},this._defaults,e),("number"!=typeof this.settings.seconds||this.settings.seconds<=0)&&(this.settings.seconds=this._defaults.seconds),t.isFunction(this.settings.callback)||(this.settings.callback=this._defaults.callback),(null===this.settings.startButtonClass||"string"==typeof this.settings.startButtonClass&&0===this.settings.startButtonClass.trim().length)&&(this.settings.startButtonClass=this._defaults.startButtonClass),(null===this.settings.stopButtonClass||"string"==typeof this.settings.stopButtonClass&&0===this.settings.stopButtonClass.trim().length)&&(this.settings.stopButtonClass=this._defaults.stopButtonClass),this._init()}var i="autoRefresher";t.extend(o.prototype,{_init:function(){var s=this,e=t(this.element);e.on("autoRefresher.start",function(){s._startAutoRefresh()}),e.on("autoRefresher.stop",function(){s._stopAutoRefresh()}),e.hasClass("auto-refresher")||e.addClass("auto-refresher"),s.settings.showControls&&(t("<button />").attr("type","button").addClass(s.settings.stopButtonClass).html(s.settings.stopButtonInner).on("click",function(){s._stopAutoRefresh()}).appendTo(e),t("<button />").attr("type","button").addClass(s.settings.startButtonClass).html(s.settings.startButtonInner).on("click",function(){s._startAutoRefresh()}).appendTo(e));let n=t("<div />").attr("class","auto-refresher-container").css({height:s.settings.progressBarHeight,"background-color":s.settings.backgroundColor}).appendTo(e);s.progressBar=t("<span />").attr("class","auto-refresher-progress-bar").css("background-color",s.settings.foregroundColor).appendTo(n),s._startAutoRefresh()},_startAutoRefresh:function(){let e=this;if(this.inProgress)return;let n=t(e.progressBar);e.inProgress=!0,n.css("transition",e.settings.seconds+"s linear"),n.width("100%"),e.timeout=s.setTimeout(function(){n.css("transition",""),null!==e.interval&&s.clearInterval(e.interval),e.settings.callback()},1e3*e.settings.seconds),e.timeRemaining=e.settings.seconds,e.interval=s.setInterval(function(){e.timeRemaining--,t(e.settings.timeRemainingId).html(e.timeRemaining)},1e3)},_stopAutoRefresh:function(){let e=this;if(!e.inProgress)return;let n=t(e.progressBar);e.inProgress=!1,n.css("transition",""),n.width("0%"),s.clearTimeout(e.timeout),s.clearInterval(e.interval)}}),t.fn[i]=function(s){return this.each(function(){t.data(this,"plugin_"+i)||t.data(this,"plugin_"+i,new o(this,s))})},t.fn[i].defaults={seconds:60,callback:function(){location.reload()},showControls:!0,progressBarHeight:"7px",stopButtonClass:"auto-refresher-button",startButtonClass:"auto-refresher-button",stopButtonInner:"Stop",startButtonInner:"Start",backgroundColor:"#6C757D",foregroundColor:"#007BFF",timeRemainingId:"#auto-refresher-time-remaining"}})(t,window,document)})(jQuery);